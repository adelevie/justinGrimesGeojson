<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />

  <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<style>
	#map { height: 500px; }
</style>
<body>
<svg width="225pt" height="225pt" viewBox="0 0 225 225" version="1.1" xmlns="http://www.w3.org/2000/svg">
<!-- <path fill="#ffffff" d=" M 0.00 0.00 L 225.00 0.00 L 225.00 225.00 L 0.00 225.00 L 0.00 0.00 Z" /> -->
<path fill="#753112" d=" M 93.02 21.69 C 97.94 20.02 102.65 17.25 107.99 17.33 C 112.68 17.26 117.42 17.00 122.06 17.83 C 127.48 19.37 132.62 21.72 137.89 23.71 C 147.46 27.29 157.11 30.66 166.60 34.46 C 176.46 38.19 186.47 41.53 196.19 45.62 C 195.18 46.98 194.41 48.77 192.70 49.37 C 187.23 51.47 181.24 52.26 176.17 55.37 C 177.55 57.27 180.18 58.96 179.60 61.65 C 179.63 62.97 178.03 63.37 177.18 64.06 C 172.07 66.82 166.36 68.17 160.90 70.02 C 154.20 72.08 147.89 75.55 140.80 76.13 C 136.02 76.85 131.32 75.51 126.65 74.72 C 123.78 74.17 121.08 75.61 118.47 76.57 C 112.28 78.99 106.03 82.29 99.18 81.83 C 90.94 81.37 83.88 76.37 75.83 75.03 L 75.16 75.43 C 74.57 81.21 75.05 87.02 74.98 92.82 C 70.92 93.31 67.19 95.49 63.03 95.27 C 52.69 95.10 42.34 95.07 31.99 95.25 C 29.75 95.23 27.46 95.33 25.27 94.76 C 22.41 93.43 20.32 90.97 17.99 88.94 C 16.76 91.00 15.56 93.09 14.47 95.23 C 14.16 86.16 14.47 77.08 14.33 68.00 C 14.45 64.41 13.91 60.62 15.46 57.25 C 16.82 53.71 19.56 50.87 22.49 48.55 C 26.87 45.84 31.99 44.70 36.69 42.65 C 55.49 35.73 74.16 28.47 93.02 21.69 Z" />
<path fill="#e9b96c" d=" M 196.19 45.62 C 200.31 47.11 204.71 48.98 207.33 52.67 C 209.84 56.99 211.38 61.96 211.33 66.99 C 211.23 86.32 211.53 105.65 211.26 124.98 C 204.71 127.01 198.60 130.24 192.02 132.19 C 186.86 133.71 181.84 135.66 176.94 137.85 C 160.14 144.73 142.93 150.55 125.99 157.06 C 116.89 160.63 106.57 159.32 97.56 156.13 C 89.66 152.99 81.64 150.17 73.72 147.12 C 68.16 144.95 61.81 143.95 57.40 139.60 C 53.55 136.21 50.98 131.21 51.39 125.98 C 51.03 122.21 54.12 118.22 58.04 118.30 C 64.47 117.76 69.89 121.80 75.67 123.89 C 75.97 107.60 75.37 91.31 75.83 75.03 C 83.88 76.37 90.94 81.37 99.18 81.83 C 106.03 82.29 112.28 78.99 118.47 76.57 C 121.08 75.61 123.78 74.17 126.65 74.72 C 131.32 75.51 136.02 76.85 140.80 76.13 C 147.89 75.55 154.20 72.08 160.90 70.02 C 166.36 68.17 172.07 66.82 177.18 64.06 C 178.03 63.37 179.63 62.97 179.60 61.65 C 180.18 58.96 177.55 57.27 176.17 55.37 C 181.24 52.26 187.23 51.47 192.70 49.37 C 194.41 48.77 195.18 46.98 196.19 45.62 Z" />
<path fill="#5d270d" d=" M 75.16 75.43 L 75.83 75.03 C 75.37 91.31 75.97 107.60 75.67 123.89 C 69.89 121.80 64.47 117.76 58.04 118.30 C 54.12 118.22 51.03 122.21 51.39 125.98 C 50.98 131.21 53.55 136.21 57.40 139.60 C 61.81 143.95 68.16 144.95 73.72 147.12 C 81.64 150.17 89.66 152.99 97.56 156.13 C 106.57 159.32 116.89 160.63 125.99 157.06 C 142.93 150.55 160.14 144.73 176.94 137.85 C 181.84 135.66 186.86 133.71 192.02 132.19 C 198.60 130.24 204.71 127.01 211.26 124.98 C 211.50 136.65 211.26 148.32 211.39 160.00 C 212.01 167.60 207.45 175.32 200.54 178.52 C 194.38 181.33 187.80 183.06 181.58 185.72 C 165.75 191.39 150.14 197.68 134.31 203.38 C 128.97 205.34 123.77 208.06 118.01 208.54 C 112.09 208.87 105.96 209.04 100.34 206.85 C 77.76 198.46 55.26 189.82 32.66 181.46 C 28.45 179.87 23.86 178.69 20.49 175.53 C 17.61 173.04 15.78 169.57 14.61 165.99 C 14.19 163.01 14.36 159.99 14.33 157.00 C 14.46 136.41 14.17 115.81 14.47 95.23 C 15.56 93.09 16.76 91.00 17.99 88.94 C 20.32 90.97 22.41 93.43 25.27 94.76 C 27.46 95.33 29.75 95.23 31.99 95.25 C 42.34 95.07 52.69 95.10 63.03 95.27 C 67.19 95.49 70.92 93.31 74.98 92.82 C 75.05 87.02 74.57 81.21 75.16 75.43 Z" />
<path fill="#5d270d" d=" M 170.65 104.59 C 172.88 101.95 178.33 100.66 180.23 104.19 C 180.95 107.74 180.66 111.42 180.55 115.03 C 180.47 120.33 174.84 123.99 169.87 123.64 C 167.71 120.87 168.23 117.28 168.15 114.01 C 168.22 110.74 167.84 106.90 170.65 104.59 Z" />
<path fill="#5d270d" d=" M 147.56 112.56 C 150.20 110.56 156.08 110.50 155.72 115.01 C 155.54 120.24 157.36 126.88 152.78 130.74 C 150.80 132.85 147.68 132.94 145.04 132.41 C 142.46 130.03 143.60 126.12 143.30 123.01 C 143.01 119.09 143.87 114.67 147.56 112.56 Z" />
<path fill="#e9b96c" d=" M 189.35 146.20 C 193.01 144.58 196.47 147.65 198.31 150.56 C 199.02 154.84 199.12 159.79 196.29 163.37 C 193.84 166.49 191.06 169.69 187.20 171.02 C 183.18 172.81 178.62 173.30 174.87 175.72 C 174.36 173.94 173.79 172.17 173.04 170.48 C 170.48 170.34 167.81 170.18 165.44 171.35 C 161.45 173.14 157.17 174.27 153.33 176.35 C 150.30 178.21 150.15 182.08 148.94 185.07 C 146.54 186.64 143.65 187.17 141.01 188.20 C 137.24 189.40 133.15 191.61 129.21 189.73 C 127.19 189.06 126.15 186.99 125.67 185.06 C 124.33 177.89 128.10 170.21 134.22 166.40 C 139.06 163.99 144.36 162.68 149.35 160.59 C 162.70 155.85 175.72 150.14 189.35 146.20 Z" />
</svg><br/>
<div id="map"></div>
<textarea style="width:400px;height:400px"></textarea>
<script src = "https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	
  <script>


	var map = L.map('map')
			.setView([39, -77], 11);

  	var features = [];
	  $("path").each(function(i){

		 var path = this;
		 var len = path.getTotalLength();
		 var coordinates = []

		 //log the first coordinates to append to the end of the array (geoJSON polygons need to have identical first and last polygons)

		 var firstCoord = transformPoint([
		 	path.getPointAtLength(0).x,
		 	path.getPointAtLength(0).y
		 ]);

		 for(var i=0; i<len; i++){
		  p=path.getPointAtLength(i);
		  point=transformPoint([p.x,p.y]);
		  coordinates.push(point)
		 };

		 coordinates.push(firstCoord);
		 
	
		var feature = {
			type:"Feature",
			properties: "",
			geometry:{
				type:"Polygon",
				coordinates:[]
			}
		};

		feature.geometry.coordinates.push(coordinates);
		console.log(feature);
		features.push(feature);


		var geoJSON = {
			type: "FeatureCollection",
			features: features
		}


		L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'examples.map-20v6611k'
		}).addTo(map);

		 L.geoJson(geoJSON).addTo(map);
		//Write to screen
		$('textarea').val(JSON.stringify(geoJSON));

		function transformPoint(point) {

			var xscale = 1800,
			yscale = 2000,
			xoffset = -77.1,
			yoffset = 38.95;

			point[0]=(point[0]/xscale) + xoffset;
			point[1]=-(point[1]/yscale) + yoffset;

			return point;
		}

	});
  </script>
</body>
</html>